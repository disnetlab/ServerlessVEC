FROM brunneis/python:3.8.3-ubuntu-20.04
WORKDIR /app

RUN apt update && apt upgrade -y && apt install -y \
        net-tools \
        iputils-ping \
        iproute2 \
        telnet telnetd \
        iperf \
	curl \
	tcpdump \
	iw \
	iproute2 \
	net-tools \
	ethtool \
	wireless-tools \
	openssh-server \
	iptables \
	openvswitch-switch \
	build-essential \
	vim \
	python3-pip

COPY installDocker.sh /app
RUN chmod 777 installDocker.sh
RUN ./installDocker.sh



#COPY k3s /app
#RUN chmod 777 k3s

COPY k3sInstaller.sh /app
RUN chmod 777 k3sInstaller.sh
RUN INSTALL_K3S_SKIP_ENABLE=true ./k3sInstaller.sh  


COPY startKubernetes.sh /app
RUN chmod 777 startKubernetes.sh


COPY installOpenFaas.sh /app
RUN chmod 777 installOpenFaas.sh

COPY installArkade.sh /app
RUN chmod 777 installArkade.sh
RUN ./installArkade.sh


COPY hello-python.yml /app
COPY hello-python/ /app/hello-python

COPY daemon.json /etc/docker/daemon.json

#RUN curl -sLS https://get.arkade.dev | sh

#CMD curl -sfL https://get.k3s.io | sh -

COPY index.html /app

EXPOSE 80
EXPOSE 8888


